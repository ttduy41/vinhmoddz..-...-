<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VINHMOD SHOP | ALL-IN-ONE MOBILE</title>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;700;900&display=swap" rel="stylesheet">
    <style>
        :root { --main: #ff2d8d; --bg: #0f172a; --card: #1e293b; --text: #f8fafc; --border: rgba(255, 255, 255, 0.1); --admin: #00ff88; --card-color: #ff7e00; }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Lexend', sans-serif; transition: 0.3s; }
        body { background: var(--bg); color: var(--text); overflow-x: hidden; }
        
        #introScreen, #authScreen, .modal { position: fixed; inset: 0; z-index: 10000; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(15px); background: rgba(15, 23, 42, 0.95); }
        .box { background: var(--card); padding: 30px; border-radius: 25px; border: 2px solid var(--main); text-align: center; width: 92%; max-width: 400px; box-shadow: 0 0 30px rgba(255, 45, 141, 0.2); }
        
        header { height: 70px; background: var(--card); display: flex; align-items: center; justify-content: space-between; padding: 0 20px; border-bottom: 3px solid var(--main); position: sticky; top: 0; z-index: 1000; }
        .wallet { background: rgba(255,45,141,0.1); padding: 8px 12px; border-radius: 12px; color: var(--main); font-weight: bold; border: 1px solid var(--main); font-size: 14px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; padding: 20px; max-width: 1200px; margin: auto; }
        .p-card { background: var(--card); border-radius: 20px; padding: 20px; border: 1px solid var(--border); border-top: 5px solid var(--main); }
        
        #menu { position: fixed; top: 0; left: -420px; width: 350px; height: 100%; background: var(--card); z-index: 2000; padding: 20px; border-right: 3px solid var(--main); overflow-y: auto; }
        .section { background: rgba(0,0,0,0.2); border-radius: 15px; padding: 15px; margin-bottom: 15px; border: 1px solid var(--border); }
        .sec-title { font-size: 10px; font-weight: 900; color: var(--main); margin-bottom: 10px; text-transform: uppercase; }
        
        input, select, button, textarea { width: 100%; padding: 14px; margin: 8px 0; border-radius: 12px; border: 1px solid var(--border); background: var(--bg); color: var(--text); outline: none; font-size: 14px; }
        .btn-main { background: var(--main); border: none; font-weight: 900; cursor: pointer; color: white; text-transform: uppercase; }
        .btn-contact { display: flex; align-items: center; justify-content: center; gap: 8px; padding: 12px; border-radius: 10px; text-decoration: none; color: white; font-weight: bold; font-size: 12px; margin-bottom: 8px; }
        
        .qr-img { width: 100%; max-width: 220px; background: white; margin: 10px auto; border-radius: 15px; padding: 8px; display: flex; align-items: center; justify-content: center; }
        .noti-item { font-size: 10px; padding: 10px; border-bottom: 1px solid #333; color: var(--admin); background: rgba(0,255,136,0.05); margin-bottom: 5px; border-radius: 8px; }
        #overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.7); z-index: 1500; }
        .stock-row { display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; margin-bottom: 15px; font-size: 11px; text-align: center; }
        .s-box { background: rgba(0,0,0,0.3); padding: 8px; border-radius: 10px; }
    </style>
</head>
<body>

    <div id="introScreen"><div class="box">
        <h1 style="color:var(--main); font-weight: 900; font-size: 30px;">VINHMOD SHOP</h1>
        <p style="margin: 10px 0; opacity: 0.7; font-size: 13px;">H·ªá th·ªëng cung c·∫•p Key Mod & Acc Game</p>
        <div style="margin: 20px 0;">
            <a href="https://zalo.me/0364684151" target="_blank" class="btn-contact" style="background: #0068ff;">ZALO: 0364684151</a>
            <a href="https://t.me/DoHoangVinh" target="_blank" class="btn-contact" style="background: #229ed9;">TELEGRAM: @DoHoangVinh</a>
        </div>
        <button class="btn-main" onclick="goToAuth()">TI·∫æP T·ª§C ƒêƒÇNG NH·∫¨P</button>
    </div></div>

    <div id="authScreen" style="display:none"><div class="box">
        <h2 id="authTitle" style="color:var(--main); margin-bottom:20px;">ƒêƒÇNG NH·∫¨P</h2>
        <input id="uIn" placeholder="T√™n t√†i kho·∫£n">
        <input type="password" id="pIn" placeholder="M·∫≠t kh·∫©u">
        <button class="btn-main" onclick="handleAuth()">X√ÅC NH·∫¨N</button>
        <div style="display:flex; justify-content: space-between; margin-top:15px; font-size:11px;">
            <p onclick="switchAuth()" id="switchText" style="cursor:pointer; opacity:0.6;">Ch∆∞a c√≥ t√†i kho·∫£n? <b style="color:var(--main)">ƒêƒÉng k√Ω</b></p>
            <p onclick="forgotPass()" style="cursor:pointer; color: #888;">Qu√™n m·∫≠t kh·∫©u?</p>
        </div>
    </div></div>

    <div id="app" style="display:none">
        <header>
            <div onclick="toggleM(true)" style="font-size:28px; cursor:pointer; color:var(--main)">‚ò∞</div>
            <div style="font-weight:900; letter-spacing: 1px;">VINHMODLAG</div>
            <div class="wallet">üí∞ <span id="balDisp">0</span>ƒë</div>
        </header>

        <div id="menu">
            <h3 style="color:var(--main); margin-bottom:15px; font-size: 14px;">User: <span id="userDisp"></span></h3>
            
            <div id="admPanel" style="display:none">
                <div class="section" style="border-color: var(--admin);">
                    <div class="sec-title" style="color:var(--admin)">üîî DUY·ªÜT N·∫†P</div>
                    <div id="admNotiList"></div>
                    <button class="btn-main" style="background:#444; font-size:9px;" onclick="data.notis=[]; save();">X√ìA TH√îNG B√ÅO</button>
                </div>
                <div class="section" style="border-color: #0068ff;">
                    <div class="sec-title" style="color:#0068ff">üõ† ADMIN TOOL</div>
                    <select id="aProd" onchange="updPl()"></select><select id="aPlan"></select>
                    <textarea id="aKey" placeholder="N·∫°p key theo d√≤ng..." rows="2"></textarea>
                    <button class="btn-main" style="background:#0068ff" onclick="addS()">N·∫†P KHO</button>
                    <input id="aUser" placeholder="T√™n kh√°ch"><input type="number" id="aAmt" placeholder="S·ªë ti·ªÅn c·ªông">
                    <button class="btn-main" style="background:var(--admin); color:#000" onclick="addM()">C·ªòNG TI·ªÄN V√ç</button>
                </div>
            </div>

            <div class="section">
                <div class="sec-title">üí≥ N·∫†P QUA MOMO (QR)</div>
                <select id="cVal" onchange="updateQR()">
                    <option value="10000">10,000ƒë</option><option value="50000">50,000ƒë</option><option value="100000">100,000ƒë</option><option value="200000">200,000ƒë</option>
                </select>
                <div class="qr-img"><img src="" id="qrDisp" style="width:100%"></div>
                <p style="font-size:10px; text-align:center;">MOMO: 0975651390 | ND: <b>NAP <span class="uName"></span></b></p>
                <button class="btn-main" style="background:#0068ff; margin-top:5px;" onclick="sendNap('Momo')">B√ÅO ADMIN ƒê√É CK</button>
            </div>

            <div class="section" style="border-color: var(--card-color);">
                <div class="sec-title" style="color: var(--card-color);">üéü N·∫†P TH·∫∫ C√ÄO</div>
                <select id="cardType"><option value="Viettel">Viettel</option><option value="Vina">Vina</option><option value="Mobi">Mobi</option></select>
                <input id="cardSeri" placeholder="S·ªë Seri"><input id="cardPin" placeholder="M√£ th·∫ª">
                <button class="btn-main" style="background: var(--card-color);" onclick="sendCard()">G·ª¨I TH·∫∫ ƒê·ª¢I DUY·ªÜT</button>
            </div>

            <div class="section"><div class="sec-title">üìã L·ªäCH S·ª¨</div><div id="hList" style="font-size:10px;"></div></div>
            <button onclick="logout()" style="background:none; color:#ff4757; border:1px solid #ff4757; padding:12px; width:100%; border-radius:12px; cursor:pointer;">ƒêƒÇNG XU·∫§T</button>
        </div>

        <div class="grid" id="sGrid"></div>
    </div>

    <div id="kModal" class="modal" style="display:none"><div class="box">
        <h2 style="color:var(--main)">MUA TH√ÄNH C√îNG</h2>
        <div id="kRes" style="background:#000; padding:15px; border-radius:10px; margin:15px 0; word-break:break-all; font-family:monospace; color:var(--main); border:1px solid #333;"></div>
        <button class="btn-main" onclick="copyK()">COPY M√É KEY</button>
        <button onclick="document.getElementById('kModal').style.display='none'" style="background:none; border:none; color:gray; margin-top:10px; cursor:pointer;">QUAY L·∫†I</button>
    </div></div>
    <div id="overlay" onclick="toggleM(false)"></div>

    <script>
        const DB_KEY = 'VINHMOD_V1600_DB';
        const MY_MOMO = "0975651390"; 
        let isLog = true;

        let data = JSON.parse(localStorage.getItem(DB_KEY)) || {
            users: { "vinhmoddz": { p: "123", b: 9999999, admin: true, buys: [] } },
            notis: [],
            prods: [
                { id: 0, n: "Hopper Plus", pl: {"1 Ng√†y": 10000, "7 Ng√†y": 200000, "Vƒ©nh Vi·ªÖn": 400000}, st: {"1 Ng√†y":[], "7 Ng√†y":[], "Vƒ©nh Vi·ªÖn":[]}, so:0, tt:0 },
                { id: 1, n: "Itachi Ping V3", pl: {"1 Ng√†y": 10000, "7 Ng√†y": 200000, "Vƒ©nh Vi·ªÖn": 400000}, st: {"1 Ng√†y":[], "7 Ng√†y":[], "Vƒ©nh Vi·ªÖn":[]}, so:0, tt:0 }
            ]
        };
        let user = localStorage.getItem('VSS');

        function goToAuth() { document.getElementById('introScreen').style.display='none'; document.getElementById('authScreen').style.display='flex'; }
        function save() { localStorage.setItem(DB_KEY, JSON.stringify(data)); if(user) render(); }
        
        function switchAuth() { 
            isLog = !isLog; 
            document.getElementById('authTitle').innerText = isLog ? "ƒêƒÇNG NH·∫¨P" : "ƒêƒÇNG K√ù";
            document.getElementById('switchText').innerHTML = isLog ? "Ch∆∞a c√≥ t√†i kho·∫£n? <b style='color:var(--main)'>ƒêƒÉng k√Ω</b>" : "ƒê√£ c√≥ t√†i kho·∫£n? <b style='color:var(--main)'>ƒêƒÉng nh·∫≠p</b>";
        }

        function handleAuth() {
            let u = document.getElementById('uIn').value.trim().toLowerCase(), p = document.getElementById('pIn').value.trim();
            if(!u || !p) return alert("ƒêi·ªÅn ƒë·ªß th√¥ng tin s·∫øp ∆°i!");
            if(isLog) {
                if(data.users[u] && data.users[u].p === p) { user = u; localStorage.setItem('VSS', u); render(); }
                else alert("Sai t√†i kho·∫£n ho·∫∑c m·∫≠t kh·∫©u!");
            } else {
                if(data.users[u]) return alert("T√™n n√†y ƒë√£ t·ªìn t·∫°i!");
                data.users[u] = { p: p, b: 0, admin: (u === "vinhmoddz"), buys: [] };
                save(); isLog=true; switchAuth(); alert("ƒêƒÉng k√Ω th√†nh c√¥ng!");
            }
        }

        function forgotPass() {
            let u = document.getElementById('uIn').value.trim();
            let msg = u ? `S·∫øp Vinh ∆°i, em qu√™n m·∫≠t kh·∫©u t√†i kho·∫£n: ${u}` : `S·∫øp Vinh ∆°i, em qu√™n m·∫≠t kh·∫©u t√†i kho·∫£n, s·∫øp h·ªó tr·ª£ em v·ªõi!`;
            window.open(`https://zalo.me/0364684151?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function updateQR() {
            if(!user) return;
            let val = document.getElementById('cVal').value;
            document.getElementById('qrDisp').src = `https://api.qrserver.com/v1/create-qr-code/?size=250x250&data=2|99|${MY_MOMO}|||0|0|${val}|NAP%20${user.toUpperCase()}|transfer_myqr`;
        }

        function render() {
            document.getElementById('introScreen').style.display='none'; document.getElementById('authScreen').style.display='none'; 
            document.getElementById('app').style.display='block';
            document.getElementById('userDisp').innerText = user; 
            document.querySelectorAll('.uName').forEach(el => el.innerText = user.toUpperCase());
            document.getElementById('balDisp').innerText = data.users[user].b.toLocaleString();
            updateQR();

            if(data.users[user].admin) { 
                document.getElementById('admPanel').style.display='block'; 
                document.getElementById('aProd').innerHTML = data.prods.map(p=>`<option value="${p.id}">${p.n}</option>`).join('');
                document.getElementById('admNotiList').innerHTML = data.notis.map(n => `<div class="noti-item"><b>${n.u}</b>: ${n.type} ${n.v}ƒë <br><small>${n.t}</small></div>`).join('') || '<small>Tr·ªëng</small>';
                updPl();
            }

            let h = "";
            data.prods.forEach(p => {
                let rem = Object.values(p.st).reduce((a,b)=>a+b.length, 0);
                h += `<div class="p-card"><div style="font-weight:900; color:var(--main); font-size:18px;">${p.n}</div>
                <div class="stock-row"><div class="s-box">C√≤n: ${rem}</div><div class="s-box">B√°n: ${p.so}</div></div>
                <select id="sel-${p.id}">${Object.keys(p.pl).map(k=>`<option value="${k}">${k} - ${p.pl[k].toLocaleString()}ƒë</option>`).join('')}</select>
                <button class="btn-main" onclick="buy(${p.id})">MUA NGAY</button></div>`;
            });
            document.getElementById('sGrid').innerHTML = h;
            document.getElementById('hList').innerHTML = data.users[user].buys.map((b,i)=>`<div style="margin-bottom:8px; border-bottom:1px solid #333;"><b>${b.n}</b> <span style="color:var(--main); cursor:pointer; font-size:9px;" onclick="viewK(${i})">[COPY KEY]</span></div>`).join('');
        }

        function updPl() { let p = data.prods[document.getElementById('aProd').value]; document.getElementById('aPlan').innerHTML = Object.keys(p.pl).map(k=>`<option value="${k}">${k}</option>`).join(''); }
        function buy(id) {
            let p = data.prods[id], pl = document.getElementById(`sel-${id}`).value;
            if(data.users[user].b < p.pl[pl]) return alert("Vui l√≤ng n·∫°p th√™m ti·ªÅn!");
            if(!p.st[pl] || p.st[pl].length == 0) return alert("H·∫øt h√†ng!");
            let k = p.st[pl].shift(); data.users[user].b -= p.pl[pl]; p.so++;
            data.users[user].buys.unshift({n:p.n, p:pl, k:k}); save();
            document.getElementById('kRes').innerText = k; document.getElementById('kModal').style.display='flex';
        }

        function sendNap(type) {
            data.notis.unshift({ u: user, v: document.getElementById('cVal').value, type: type, t: new Date().toLocaleString() });
            save(); alert("ƒê√£ b√°o s·∫øp Vinh!");
        }

        function sendCard() {
            let s = document.getElementById('cardSeri').value, p = document.getElementById('cardPin').value;
            if(!s || !p) return alert("Nh·∫≠p ƒë·ªß Seri v√† M√£ th·∫ª!");
            data.notis.unshift({ u: user, v: 'Th·∫ª', type: 'CARD', t: new Date().toLocaleString() });
            save(); alert("G·ª≠i th·∫ª xong!");
        }

        function addS() { 
            let id=document.getElementById('aProd').value, pl=document.getElementById('aPlan').value, kStr=document.getElementById('aKey').value.trim();
            if(!kStr) return;
            kStr.split('\n').filter(k => k.trim() !== "").forEach(k => { data.prods[id].st[pl].push(k.trim()); data.prods[id].tt++; });
            save(); document.getElementById('aKey').value=""; alert("N·∫°p kho xong!");
        }

        function addM() { 
            let u=document.getElementById('aUser').value.trim().toLowerCase(), a=parseInt(document.getElementById('aAmt').value); 
            if(data.users[u]){ data.users[u].b += a; save(); alert("C·ªông ti·ªÅn xong!"); }
        }

        function logout() { localStorage.removeItem('VSS'); location.reload(); }
        function toggleM(s) { document.getElementById('menu').style.left=s?'0':'-420px'; document.getElementById('overlay').style.display=s?'block':'none'; }
        function viewK(i) { document.getElementById('kRes').innerText = data.users[user].buys[i].k; document.getElementById('kModal').style.display='flex'; }
        function copyK() { navigator.clipboard.writeText(document.getElementById('kRes').innerText); alert("ƒê√£ copy!"); }
        
        window.onbeforeunload = save;
        if(user) render();
    </script>
</body>
    </html>
    
